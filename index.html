<!doctype html>
<html lang="pl" data-theme="dark">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, user-scalable=no"
        />
        <title>klefas.me â€” Strona w budowie ğŸš§</title>
        <meta
            name="description"
            content="Strona klefas.me jest aktualnie w budowie. Zapraszam wkrÃ³tce! W miÄ™dzyczasie zagraj w 2048."
        />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://klefas.me/" />
        <meta property="og:title" content="klefas.me â€” Strona w budowie ğŸš§" />
        <meta
            property="og:description"
            content="PracujÄ™ nad czymÅ› wyjÄ…tkowym. Zapraszam wkrÃ³tce â€” a w miÄ™dzyczasie zagraj w 2048! ğŸ®"
        />
        <meta property="og:image" content="https://klefas.me/og-image.png" />
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:title" content="klefas.me â€” Strona w budowie ğŸš§" />
        <meta
            name="twitter:description"
            content="PracujÄ™ nad czymÅ› wyjÄ…tkowym. Zapraszam wkrÃ³tce â€” a w miÄ™dzyczasie zagraj w 2048! ğŸ®"
        />
        <meta
            name="theme-color"
            content="#0a0a0f"
            media="(prefers-color-scheme: dark)"
        />
        <meta
            name="theme-color"
            content="#f0f0f5"
            media="(prefers-color-scheme: light)"
        />
        <link rel="canonical" href="https://klefas.me/" />
        <link
            rel="icon"
            href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸš€</text></svg>"
        />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;700&display=swap"
            rel="stylesheet"
        />
        <style>
            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               CSS VARIABLES & THEME SYSTEM
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            :root {
                --transition-speed: 0.35s;
            }

            [data-theme="dark"] {
                --bg-primary: #0a0a0f;
                --bg-secondary: #12121a;
                --bg-card: #1a1a2e;
                --bg-card-hover: #222240;
                --bg-game: #16213e;
                --bg-cell: #1a1a2e;
                --text-primary: #e8e8f0;
                --text-secondary: #9090a8;
                --text-muted: #5a5a72;
                --accent: #6c63ff;
                --accent-glow: rgba(108, 99, 255, 0.3);
                --accent-secondary: #ff6b9d;
                --border: rgba(255, 255, 255, 0.06);
                --shadow: rgba(0, 0, 0, 0.4);
                --particle-color: rgba(108, 99, 255, 0.15);
                --glass: rgba(26, 26, 46, 0.7);
                --glass-border: rgba(255, 255, 255, 0.08);
                --scrollbar-track: #12121a;
                --scrollbar-thumb: #2a2a40;
                --tile-2: #2a2a4a;
                --tile-2-text: #e8e8f0;
                --tile-4: #33335a;
                --tile-4-text: #e8e8f0;
                --tile-8: #5b4bb8;
                --tile-8-text: #ffffff;
                --tile-16: #6c63ff;
                --tile-16-text: #ffffff;
                --tile-32: #7c6fff;
                --tile-32-text: #ffffff;
                --tile-64: #ff6b9d;
                --tile-64-text: #ffffff;
                --tile-128: #ff5277;
                --tile-128-text: #ffffff;
                --tile-256: #ffc107;
                --tile-256-text: #1a1a2e;
                --tile-512: #ff9800;
                --tile-512-text: #ffffff;
                --tile-1024: #f44336;
                --tile-1024-text: #ffffff;
                --tile-2048: #e91e63;
                --tile-2048-text: #ffffff;
                --tile-super: linear-gradient(135deg, #6c63ff, #ff6b9d);
                --tile-super-text: #ffffff;
            }

            [data-theme="light"] {
                --bg-primary: #f0f0f5;
                --bg-secondary: #e8e8f0;
                --bg-card: #ffffff;
                --bg-card-hover: #f5f5ff;
                --bg-game: #e8e0d8;
                --bg-cell: #cdc1b4;
                --text-primary: #1a1a2e;
                --text-secondary: #5a5a72;
                --text-muted: #9090a8;
                --accent: #6c63ff;
                --accent-glow: rgba(108, 99, 255, 0.15);
                --accent-secondary: #ff6b9d;
                --border: rgba(0, 0, 0, 0.08);
                --shadow: rgba(0, 0, 0, 0.1);
                --particle-color: rgba(108, 99, 255, 0.08);
                --glass: rgba(255, 255, 255, 0.7);
                --glass-border: rgba(0, 0, 0, 0.06);
                --scrollbar-track: #e8e8f0;
                --scrollbar-thumb: #c0c0d0;
                --tile-2: #eee4da;
                --tile-2-text: #776e65;
                --tile-4: #ede0c8;
                --tile-4-text: #776e65;
                --tile-8: #f2b179;
                --tile-8-text: #ffffff;
                --tile-16: #f59563;
                --tile-16-text: #ffffff;
                --tile-32: #f67c5f;
                --tile-32-text: #ffffff;
                --tile-64: #f65e3b;
                --tile-64-text: #ffffff;
                --tile-128: #edcf72;
                --tile-128-text: #ffffff;
                --tile-256: #edcc61;
                --tile-256-text: #ffffff;
                --tile-512: #edc850;
                --tile-512-text: #ffffff;
                --tile-1024: #edc53f;
                --tile-1024-text: #ffffff;
                --tile-2048: #edc22e;
                --tile-2048-text: #ffffff;
                --tile-super: linear-gradient(135deg, #6c63ff, #ff6b9d);
                --tile-super-text: #ffffff;
            }

            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               BASE RESET
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            *,
            *::before,
            *::after {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            html {
                scroll-behavior: smooth;
            }
            body {
                font-family:
                    "Inter",
                    -apple-system,
                    BlinkMacSystemFont,
                    sans-serif;
                background: var(--bg-primary);
                color: var(--text-primary);
                min-height: 100vh;
                overflow-x: hidden;
                transition:
                    background var(--transition-speed) ease,
                    color var(--transition-speed) ease;
            }
            ::-webkit-scrollbar {
                width: 8px;
            }
            ::-webkit-scrollbar-track {
                background: var(--scrollbar-track);
            }
            ::-webkit-scrollbar-thumb {
                background: var(--scrollbar-thumb);
                border-radius: 4px;
            }
            ::-webkit-scrollbar-thumb:hover {
                background: var(--accent);
            }

            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               PARTICLES
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            #particles-canvas {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: 0;
                pointer-events: none;
            }

            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               CONSTRUCTION STRIPE
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            .construction-stripe {
                width: 100%;
                height: 6px;
                background: repeating-linear-gradient(
                    45deg,
                    #ffc107,
                    #ffc107 10px,
                    #1a1a2e 10px,
                    #1a1a2e 20px
                );
                position: fixed;
                top: 0;
                left: 0;
                z-index: 1000;
                animation: stripeMove 1s linear infinite;
            }
            .construction-stripe-bottom {
                top: auto;
                bottom: 0;
            }
            @keyframes stripeMove {
                0% {
                    background-position: 0 0;
                }
                100% {
                    background-position: 28px 0;
                }
            }

            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               NAVIGATION
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            .navbar {
                position: fixed;
                top: 6px;
                left: 0;
                right: 0;
                z-index: 100;
                padding: 12px 24px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                background: var(--glass);
                backdrop-filter: blur(20px);
                -webkit-backdrop-filter: blur(20px);
                border-bottom: 1px solid var(--glass-border);
                transition: background var(--transition-speed) ease;
            }
            .navbar-brand {
                display: flex;
                align-items: center;
                gap: 10px;
                text-decoration: none;
                color: var(--text-primary);
            }
            .navbar-logo {
                width: 36px;
                height: 36px;
                background: linear-gradient(
                    135deg,
                    var(--accent),
                    var(--accent-secondary)
                );
                border-radius: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: 800;
                font-size: 16px;
                color: #fff;
                font-family: "JetBrains Mono", monospace;
            }
            .navbar-title {
                font-weight: 700;
                font-size: 18px;
                letter-spacing: -0.5px;
            }
            .navbar-actions {
                display: flex;
                align-items: center;
                gap: 8px;
            }

            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               THEME TOGGLE
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            .theme-toggle {
                width: 44px;
                height: 44px;
                border-radius: 12px;
                border: 1px solid var(--border);
                background: var(--bg-card);
                color: var(--text-primary);
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 20px;
                transition: all 0.25s ease;
                position: relative;
                overflow: hidden;
            }
            .theme-toggle:hover {
                background: var(--bg-card-hover);
                border-color: var(--accent);
                transform: scale(1.05);
            }
            .theme-toggle:active {
                transform: scale(0.95);
            }
            .theme-toggle .icon-sun,
            .theme-toggle .icon-moon {
                position: absolute;
                transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            }
            [data-theme="dark"] .theme-toggle .icon-sun {
                opacity: 1;
                transform: rotate(0deg) scale(1);
            }
            [data-theme="dark"] .theme-toggle .icon-moon {
                opacity: 0;
                transform: rotate(90deg) scale(0);
            }
            [data-theme="light"] .theme-toggle .icon-sun {
                opacity: 0;
                transform: rotate(-90deg) scale(0);
            }
            [data-theme="light"] .theme-toggle .icon-moon {
                opacity: 1;
                transform: rotate(0deg) scale(1);
            }

            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               MAIN CONTENT
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            .main-content {
                position: relative;
                z-index: 1;
                max-width: 900px;
                margin: 0 auto;
                padding: 100px 24px 80px;
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 40px;
            }

            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               HERO
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            .hero {
                text-align: center;
                width: 100%;
            }
            .hero-badge {
                display: inline-flex;
                align-items: center;
                gap: 8px;
                padding: 8px 18px;
                border-radius: 100px;
                background: var(--bg-card);
                border: 1px solid var(--border);
                font-size: 13px;
                font-weight: 500;
                color: var(--text-secondary);
                margin-bottom: 24px;
                animation: fadeInUp 0.6s ease;
            }
            .hero-badge .dot {
                width: 8px;
                height: 8px;
                border-radius: 50%;
                background: #ffc107;
                animation: pulse 2s ease-in-out infinite;
            }
            @keyframes pulse {
                0%,
                100% {
                    opacity: 1;
                    transform: scale(1);
                }
                50% {
                    opacity: 0.5;
                    transform: scale(0.8);
                }
            }
            .hero h1 {
                font-size: clamp(2.2rem, 6vw, 3.8rem);
                font-weight: 900;
                line-height: 1.1;
                letter-spacing: -2px;
                margin-bottom: 16px;
                animation: fadeInUp 0.6s ease 0.1s both;
            }
            .hero h1 .gradient-text {
                background: linear-gradient(
                    135deg,
                    var(--accent),
                    var(--accent-secondary)
                );
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            .hero-description {
                font-size: clamp(1rem, 2.5vw, 1.2rem);
                color: var(--text-secondary);
                max-width: 500px;
                margin: 0 auto 32px;
                line-height: 1.6;
                animation: fadeInUp 0.6s ease 0.2s both;
            }
            .hero-cta {
                display: flex;
                justify-content: center;
                gap: 12px;
                flex-wrap: wrap;
                animation: fadeInUp 0.6s ease 0.3s both;
            }
            .btn {
                padding: 12px 28px;
                border-radius: 12px;
                font-size: 15px;
                font-weight: 600;
                cursor: pointer;
                text-decoration: none;
                display: inline-flex;
                align-items: center;
                gap: 8px;
                transition: all 0.25s ease;
                border: none;
                font-family: inherit;
            }
            .btn-primary {
                background: linear-gradient(135deg, var(--accent), #8b7bff);
                color: #fff;
                box-shadow: 0 4px 20px var(--accent-glow);
            }
            .btn-primary:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 30px var(--accent-glow);
            }
            .btn-secondary {
                background: var(--bg-card);
                color: var(--text-primary);
                border: 1px solid var(--border);
            }
            .btn-secondary:hover {
                background: var(--bg-card-hover);
                border-color: var(--accent);
                transform: translateY(-2px);
            }

            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               STATUS CARDS
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            .status-grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 16px;
                width: 100%;
                animation: fadeInUp 0.6s ease 0.4s both;
            }
            .status-card {
                background: var(--bg-card);
                border: 1px solid var(--border);
                border-radius: 16px;
                padding: 20px;
                text-align: center;
                transition: all 0.3s ease;
            }
            .status-card:hover {
                background: var(--bg-card-hover);
                transform: translateY(-4px);
                box-shadow: 0 8px 30px var(--shadow);
            }
            .status-icon {
                font-size: 28px;
                margin-bottom: 10px;
            }
            .status-label {
                font-size: 12px;
                font-weight: 600;
                text-transform: uppercase;
                letter-spacing: 1px;
                color: var(--text-muted);
                margin-bottom: 4px;
            }
            .status-value {
                font-size: 15px;
                font-weight: 700;
                color: var(--text-primary);
            }

            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               GAME SECTION
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            .game-section {
                width: 100%;
                animation: fadeInUp 0.6s ease 0.5s both;
            }
            .section-header {
                text-align: center;
                margin-bottom: 24px;
            }
            .section-header h2 {
                font-size: 1.6rem;
                font-weight: 800;
                letter-spacing: -1px;
                margin-bottom: 6px;
            }
            .section-header p {
                color: var(--text-secondary);
                font-size: 0.95rem;
            }
            .game-container {
                background: var(--bg-card);
                border: 1px solid var(--border);
                border-radius: 20px;
                padding: 24px;
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 16px;
            }
            .game-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                width: 100%;
                max-width: 400px;
            }
            .game-title-block h3 {
                font-family: "JetBrains Mono", monospace;
                font-size: 2rem;
                font-weight: 800;
                background: linear-gradient(
                    135deg,
                    var(--accent),
                    var(--accent-secondary)
                );
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            .score-board {
                display: flex;
                gap: 8px;
            }
            .score-box {
                background: var(--bg-secondary);
                border: 1px solid var(--border);
                border-radius: 10px;
                padding: 6px 16px;
                text-align: center;
                min-width: 70px;
            }
            .score-box .label {
                font-size: 10px;
                font-weight: 700;
                text-transform: uppercase;
                letter-spacing: 1px;
                color: var(--text-muted);
            }
            .score-box .value {
                font-family: "JetBrains Mono", monospace;
                font-size: 1.2rem;
                font-weight: 800;
                color: var(--text-primary);
            }

            /* â”€â”€ Game Grid â”€â”€ */
            .game-board {
                position: relative;
                width: 100%;
                max-width: min(400px, calc(100vw - 80px));
                aspect-ratio: 1;
                background: var(--bg-game);
                border-radius: 12px;
                padding: 8px;
                touch-action: none;
                user-select: none;
                -webkit-user-select: none;
            }
            .grid-bg {
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                grid-template-rows: repeat(4, 1fr);
                gap: 8px;
                width: 100%;
                height: 100%;
            }
            .grid-cell {
                background: var(--bg-cell);
                border-radius: 8px;
            }
            .tiles-container {
                position: absolute;
                top: 8px;
                left: 8px;
                right: 8px;
                bottom: 8px;
            }
            .tile {
                position: absolute;
                display: flex;
                align-items: center;
                justify-content: center;
                font-family: "JetBrains Mono", monospace;
                font-weight: 800;
                border-radius: 8px;
                transition:
                    top 0.12s ease-out,
                    left 0.12s ease-out;
                z-index: 10;
                will-change: top, left;
            }
            .tile.tile-new {
                animation: tileAppear 0.2s ease;
            }
            .tile.tile-merged {
                animation: tilePop 0.25s ease;
                z-index: 20;
            }

            @keyframes tileAppear {
                0% {
                    transform: scale(0);
                    opacity: 0;
                }
                100% {
                    transform: scale(1);
                    opacity: 1;
                }
            }
            @keyframes tilePop {
                0% {
                    transform: scale(1);
                }
                50% {
                    transform: scale(1.2);
                }
                100% {
                    transform: scale(1);
                }
            }

            .tile-2 {
                background: var(--tile-2);
                color: var(--tile-2-text);
            }
            .tile-4 {
                background: var(--tile-4);
                color: var(--tile-4-text);
            }
            .tile-8 {
                background: var(--tile-8);
                color: var(--tile-8-text);
            }
            .tile-16 {
                background: var(--tile-16);
                color: var(--tile-16-text);
            }
            .tile-32 {
                background: var(--tile-32);
                color: var(--tile-32-text);
            }
            .tile-64 {
                background: var(--tile-64);
                color: var(--tile-64-text);
            }
            .tile-128 {
                background: var(--tile-128);
                color: var(--tile-128-text);
            }
            .tile-256 {
                background: var(--tile-256);
                color: var(--tile-256-text);
            }
            .tile-512 {
                background: var(--tile-512);
                color: var(--tile-512-text);
            }
            .tile-1024 {
                background: var(--tile-1024);
                color: var(--tile-1024-text);
            }
            .tile-2048 {
                background: var(--tile-2048);
                color: var(--tile-2048-text);
            }
            .tile-super {
                background: var(--tile-super);
                color: var(--tile-super-text);
            }

            /* â”€â”€ Game Controls â”€â”€ */
            .game-controls {
                display: flex;
                gap: 10px;
                flex-wrap: wrap;
                justify-content: center;
            }
            .game-btn {
                padding: 10px 22px;
                border-radius: 10px;
                font-size: 14px;
                font-weight: 600;
                cursor: pointer;
                border: 1px solid var(--border);
                background: var(--bg-secondary);
                color: var(--text-primary);
                font-family: inherit;
                transition: all 0.2s ease;
                display: inline-flex;
                align-items: center;
                gap: 6px;
            }
            .game-btn:hover {
                background: var(--accent);
                color: #fff;
                border-color: var(--accent);
                transform: translateY(-2px);
            }
            .game-instructions {
                color: var(--text-muted);
                font-size: 13px;
                text-align: center;
                line-height: 1.6;
            }
            .game-instructions kbd {
                display: inline-block;
                padding: 2px 8px;
                border-radius: 5px;
                background: var(--bg-secondary);
                border: 1px solid var(--border);
                font-family: "JetBrains Mono", monospace;
                font-size: 11px;
                color: var(--text-secondary);
            }

            /* â”€â”€ Overlays â”€â”€ */
            .game-overlay {
                position: absolute;
                inset: 0;
                background: rgba(0, 0, 0, 0.6);
                backdrop-filter: blur(6px);
                -webkit-backdrop-filter: blur(6px);
                border-radius: 12px;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                gap: 16px;
                z-index: 100;
                opacity: 0;
                pointer-events: none;
                transition: opacity 0.4s ease;
            }
            .game-overlay.active {
                opacity: 1;
                pointer-events: auto;
            }
            .game-overlay h3 {
                font-size: 2rem;
                font-weight: 900;
                color: #fff;
            }
            .game-overlay p {
                color: rgba(255, 255, 255, 0.7);
                font-size: 1rem;
            }
            .game-overlay .game-btn {
                background: var(--accent);
                color: #fff;
                border-color: var(--accent);
            }

            /* â”€â”€ Merge Score Popup â”€â”€ */
            .merge-popup {
                position: absolute;
                text-align: center;
                font-family: "JetBrains Mono", monospace;
                font-size: 0.9rem;
                font-weight: 800;
                color: var(--accent);
                pointer-events: none;
                z-index: 30;
                animation: mergeFloat 0.7s ease-out forwards;
            }
            @keyframes mergeFloat {
                0% {
                    opacity: 1;
                    transform: translateY(0) scale(1);
                }
                100% {
                    opacity: 0;
                    transform: translateY(-35px) scale(1.3);
                }
            }

            /* â”€â”€ Mobile D-Pad â”€â”€ */
            .mobile-controls {
                display: none;
                width: 100%;
                max-width: 200px;
                margin: 0 auto;
            }
            .mobile-controls.visible {
                display: block;
            }
            .dpad {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                grid-template-rows: repeat(3, 1fr);
                gap: 6px;
                width: 100%;
                aspect-ratio: 1;
            }
            .dpad-btn {
                background: var(--bg-secondary);
                border: 1px solid var(--border);
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 24px;
                color: var(--text-primary);
                cursor: pointer;
                transition: all 0.15s ease;
                -webkit-tap-highlight-color: transparent;
            }
            .dpad-btn:active {
                background: var(--accent);
                color: #fff;
                transform: scale(0.92);
            }
            .dpad-btn.empty {
                background: transparent;
                border: none;
                cursor: default;
            }

            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               COUNTDOWN
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            .countdown-section {
                width: 100%;
                animation: fadeInUp 0.6s ease 0.35s both;
            }
            .countdown-grid {
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 12px;
                max-width: 500px;
                margin: 16px auto 0;
            }
            .countdown-item {
                background: var(--bg-card);
                border: 1px solid var(--border);
                border-radius: 14px;
                padding: 16px 8px;
                text-align: center;
                transition: all 0.3s ease;
            }
            .countdown-item:hover {
                transform: translateY(-3px);
                box-shadow: 0 6px 20px var(--shadow);
            }
            .countdown-value {
                font-family: "JetBrains Mono", monospace;
                font-size: clamp(1.6rem, 4vw, 2.4rem);
                font-weight: 800;
                background: linear-gradient(
                    135deg,
                    var(--accent),
                    var(--accent-secondary)
                );
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                line-height: 1.2;
            }
            .countdown-label {
                font-size: 11px;
                font-weight: 600;
                text-transform: uppercase;
                letter-spacing: 1px;
                color: var(--text-muted);
                margin-top: 4px;
            }

            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               SOCIAL LINKS
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            .social-section {
                width: 100%;
                animation: fadeInUp 0.6s ease 0.55s both;
            }
            .social-grid {
                display: flex;
                justify-content: center;
                gap: 12px;
                flex-wrap: wrap;
                margin-top: 16px;
            }
            .social-link {
                display: flex;
                align-items: center;
                gap: 8px;
                padding: 12px 20px;
                background: var(--bg-card);
                border: 1px solid var(--border);
                border-radius: 12px;
                color: var(--text-primary);
                text-decoration: none;
                font-size: 14px;
                font-weight: 600;
                transition: all 0.25s ease;
            }
            .social-link:hover {
                background: var(--bg-card-hover);
                border-color: var(--accent);
                transform: translateY(-3px);
                box-shadow: 0 6px 20px var(--shadow);
            }
            .social-link svg {
                width: 20px;
                height: 20px;
                flex-shrink: 0;
            }

            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               TYPING ANIMATION
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            .typing-text {
                font-family: "JetBrains Mono", monospace;
                font-size: 14px;
                color: var(--text-muted);
                display: inline-flex;
                align-items: center;
                gap: 2px;
                margin-top: 12px;
            }
            .typing-cursor {
                display: inline-block;
                width: 2px;
                height: 1.2em;
                background: var(--accent);
                animation: blink 1s step-end infinite;
                margin-left: 2px;
            }
            @keyframes blink {
                0%,
                100% {
                    opacity: 1;
                }
                50% {
                    opacity: 0;
                }
            }

            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               FOOTER
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            .footer {
                text-align: center;
                padding: 24px;
                color: var(--text-muted);
                font-size: 13px;
                width: 100%;
            }
            .footer a {
                color: var(--accent);
                text-decoration: none;
                font-weight: 600;
            }
            .footer a:hover {
                text-decoration: underline;
            }
            .footer-links {
                display: flex;
                justify-content: center;
                gap: 16px;
                margin-top: 8px;
                flex-wrap: wrap;
            }
            .footer-links a {
                color: var(--text-muted);
                font-weight: 500;
                font-size: 12px;
                transition: color 0.2s;
            }
            .footer-links a:hover {
                color: var(--accent);
            }

            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               ANIMATIONS
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               RESPONSIVE
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            @media (max-width: 640px) {
                .main-content {
                    padding: 80px 16px 60px;
                    gap: 28px;
                }
                .status-grid {
                    grid-template-columns: 1fr;
                    gap: 10px;
                }
                .status-card {
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    text-align: left;
                    padding: 14px 18px;
                }
                .status-icon {
                    margin-bottom: 0;
                    font-size: 24px;
                }
                .game-container {
                    padding: 16px;
                }
                .game-board {
                    padding: 6px;
                }
                .grid-bg {
                    gap: 6px;
                }
                .game-header {
                    flex-direction: column;
                    gap: 12px;
                    align-items: center;
                }
                .game-instructions .desktop-only {
                    display: none;
                }
                .navbar {
                    padding: 10px 16px;
                }
                .navbar-title {
                    font-size: 15px;
                }
                .countdown-grid {
                    grid-template-columns: repeat(2, 1fr);
                    gap: 8px;
                }
                .social-link {
                    padding: 10px 16px;
                    font-size: 13px;
                }
                .social-link span {
                    display: none;
                }
            }
            @media (min-width: 641px) {
                .game-instructions .mobile-only {
                    display: none;
                }
            }
        </style>
    </head>
    <body>
        <div class="construction-stripe"></div>
        <div class="construction-stripe construction-stripe-bottom"></div>
        <canvas id="particles-canvas"></canvas>

        <!-- Navigation -->
        <nav class="navbar">
            <a href="#" class="navbar-brand">
                <div class="navbar-logo">K</div>
                <span class="navbar-title">klefas.me</span>
            </a>
            <div class="navbar-actions">
                <button
                    class="theme-toggle"
                    id="themeToggle"
                    aria-label="PrzeÅ‚Ä…cz motyw"
                    title="ZmieÅ„ motyw"
                >
                    <span class="icon-sun">â˜€ï¸</span>
                    <span class="icon-moon">ğŸŒ™</span>
                </button>
            </div>
        </nav>

        <main class="main-content">
            <!-- Hero -->
            <section class="hero">
                <div class="hero-badge">
                    <span class="dot"></span> Strona w budowie
                </div>
                <h1>
                    JuÅ¼ <span class="gradient-text">niedÅ‚ugo</span><br />tu
                    wrÃ³cÄ™.
                </h1>
                <p class="hero-description">
                    PracujÄ™ nad czymÅ› wyjÄ…tkowym. W miÄ™dzyczasie â€” pobij mÃ³j
                    rekord w grze poniÅ¼ej! ğŸ®
                </p>
                <div class="typing-text">
                    <span id="typingText"></span
                    ><span class="typing-cursor"></span>
                </div>
                <div class="hero-cta">
                    <a href="#game" class="btn btn-primary">ğŸ® Zagraj w 2048</a>
                    <a
                        href="https://github.com/0xR3TRO"
                        target="_blank"
                        rel="noopener"
                        class="btn btn-secondary"
                    >
                        <svg
                            width="18"
                            height="18"
                            viewBox="0 0 24 24"
                            fill="currentColor"
                        >
                            <path
                                d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"
                            />
                        </svg>
                        GitHub
                    </a>
                </div>
            </section>

            <!-- Status Cards -->
            <section class="status-grid">
                <div class="status-card">
                    <div class="status-icon">ğŸ”¨</div>
                    <div>
                        <div class="status-label">Status</div>
                        <div class="status-value">W budowie</div>
                    </div>
                </div>
                <div class="status-card">
                    <div class="status-icon">ğŸ“…</div>
                    <div>
                        <div class="status-label">Premiera</div>
                        <div class="status-value">WkrÃ³tce</div>
                    </div>
                </div>
                <div class="status-card">
                    <div class="status-icon">â˜•</div>
                    <div>
                        <div class="status-label">Kawa</div>
                        <div class="status-value" id="coffeeCount">âˆ</div>
                    </div>
                </div>
            </section>

            <!-- ğŸ® Game Section (moved up â€” main attraction) -->
            <section class="game-section" id="game">
                <div class="section-header">
                    <h2>ğŸ® Gra 2048</h2>
                    <p>PoÅ‚Ä…cz kafelki, aby osiÄ…gnÄ…Ä‡ 2048!</p>
                </div>
                <div class="game-container">
                    <div class="game-header">
                        <div class="game-title-block"><h3>2048</h3></div>
                        <div class="score-board">
                            <div class="score-box">
                                <div class="label">Wynik</div>
                                <div
                                    class="value"
                                    id="current-score"
                                    aria-live="polite"
                                >
                                    0
                                </div>
                            </div>
                            <div class="score-box">
                                <div class="label">Rekord</div>
                                <div
                                    class="value"
                                    id="best-score"
                                    aria-live="polite"
                                >
                                    0
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="game-board" id="gameBoard">
                        <div class="grid-bg">
                            <div class="grid-cell"></div>
                            <div class="grid-cell"></div>
                            <div class="grid-cell"></div>
                            <div class="grid-cell"></div>
                            <div class="grid-cell"></div>
                            <div class="grid-cell"></div>
                            <div class="grid-cell"></div>
                            <div class="grid-cell"></div>
                            <div class="grid-cell"></div>
                            <div class="grid-cell"></div>
                            <div class="grid-cell"></div>
                            <div class="grid-cell"></div>
                            <div class="grid-cell"></div>
                            <div class="grid-cell"></div>
                            <div class="grid-cell"></div>
                            <div class="grid-cell"></div>
                        </div>
                        <div class="tiles-container" id="tilesContainer"></div>
                        <div class="game-overlay" id="gameOverOverlay">
                            <h3>Koniec gry ğŸ’€</h3>
                            <p>Wynik: <span id="finalScore">0</span></p>
                            <button class="game-btn" onclick="game.restart()">
                                ğŸ”„ Zagraj ponownie
                            </button>
                        </div>
                        <div class="game-overlay" id="winOverlay">
                            <h3>WygraÅ‚eÅ›! ğŸ‰</h3>
                            <p>OsiÄ…gnÄ…Å‚eÅ› 2048!</p>
                            <button
                                class="game-btn"
                                onclick="game.continueAfterWin()"
                            >
                                â–¶ï¸ Graj dalej
                            </button>
                            <button class="game-btn" onclick="game.restart()">
                                ğŸ”„ Nowa gra
                            </button>
                        </div>
                    </div>

                    <div class="game-controls">
                        <button class="game-btn" onclick="game.restart()">
                            ğŸ”„ Nowa gra
                        </button>
                        <button class="game-btn" onclick="game.undo()">
                            â†©ï¸ Cofnij
                        </button>
                    </div>

                    <div class="mobile-controls" id="mobileControls">
                        <div class="dpad">
                            <div class="dpad-btn empty"></div>
                            <button class="dpad-btn" data-dir="up">â–²</button>
                            <div class="dpad-btn empty"></div>
                            <button class="dpad-btn" data-dir="left">â—€</button>
                            <div class="dpad-btn empty"></div>
                            <button class="dpad-btn" data-dir="right">â–¶</button>
                            <div class="dpad-btn empty"></div>
                            <button class="dpad-btn" data-dir="down">â–¼</button>
                            <div class="dpad-btn empty"></div>
                        </div>
                    </div>

                    <p class="game-instructions">
                        <span class="desktop-only"
                            >UÅ¼yj <kbd>â†</kbd> <kbd>â†’</kbd> <kbd>â†‘</kbd>
                            <kbd>â†“</kbd> lub <kbd>W</kbd> <kbd>A</kbd>
                            <kbd>S</kbd> <kbd>D</kbd> aby przesuwaÄ‡
                            kafelki.</span
                        >
                        <span class="mobile-only"
                            >PrzesuÅ„ palcem po planszy lub uÅ¼yj przyciskÃ³w
                            poniÅ¼ej.</span
                        >
                    </p>
                </div>
            </section>

            <!-- Countdown -->
            <section class="countdown-section">
                <div class="section-header">
                    <h2 id="countdown-title">â° Odliczanie do premiery</h2>
                    <p id="countdown-subtitle">
                        Czas leci â€” ale nie tak szybko jak chciaÅ‚bym!
                    </p>
                </div>
                <div class="countdown-grid">
                    <div class="countdown-item">
                        <div class="countdown-value" id="countdown-days">
                            00
                        </div>
                        <div class="countdown-label">Dni</div>
                    </div>
                    <div class="countdown-item">
                        <div class="countdown-value" id="countdown-hours">
                            00
                        </div>
                        <div class="countdown-label">Godzin</div>
                    </div>
                    <div class="countdown-item">
                        <div class="countdown-value" id="countdown-minutes">
                            00
                        </div>
                        <div class="countdown-label">Minut</div>
                    </div>
                    <div class="countdown-item">
                        <div class="countdown-value" id="countdown-seconds">
                            00
                        </div>
                        <div class="countdown-label">Sekund</div>
                    </div>
                </div>
            </section>

            <!-- Social Links (Discord removed â€” had empty link) -->
            <section class="social-section">
                <div class="section-header">
                    <h2>ğŸ”— ZnajdÅº mnie</h2>
                    <p>Moje profile w sieci</p>
                </div>
                <div class="social-grid">
                    <a
                        href="https://github.com/0xR3TRO"
                        target="_blank"
                        rel="noopener"
                        class="social-link"
                    >
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"
                            />
                        </svg>
                        <span>GitHub</span>
                    </a>
                    <a href="mailto:kontakt@klefas.me" class="social-link">
                        <svg
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        >
                            <rect x="2" y="4" width="20" height="16" rx="2" />
                            <path
                                d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"
                            />
                        </svg>
                        <span>E-mail</span>
                    </a>
                </div>
            </section>

            <!-- Footer -->
            <footer class="footer">
                <p>
                    Â© 2026
                    <a
                        href="https://github.com/0xR3TRO"
                        target="_blank"
                        rel="noopener"
                        >klefas.me</a
                    >
                    Â· Zbudowane z â¤ï¸ i duÅ¼Ä… iloÅ›ciÄ… â˜•
                </p>
                <div class="footer-links">
                    <a
                        href="https://github.com/0xR3TRO"
                        target="_blank"
                        rel="noopener"
                        >GitHub</a
                    >
                    <a href="mailto:kontakt@klefas.me">Kontakt</a>
                    <a href="#game">Zagraj w 2048</a>
                </div>
            </footer>
        </main>

        <script>
            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           THEME SYSTEM
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            (() => {
                const html = document.documentElement;
                const toggle = document.getElementById("themeToggle");
                const prefersDark = window.matchMedia(
                    "(prefers-color-scheme: dark)",
                );
                const stored = localStorage.getItem("theme");

                function applyTheme(t) {
                    html.setAttribute("data-theme", t);
                    localStorage.setItem("theme", t);
                }

                applyTheme(stored || (prefersDark.matches ? "dark" : "light"));

                toggle.addEventListener("click", () => {
                    applyTheme(
                        html.getAttribute("data-theme") === "dark"
                            ? "light"
                            : "dark",
                    );
                });

                prefersDark.addEventListener("change", (e) => {
                    if (!localStorage.getItem("theme"))
                        applyTheme(e.matches ? "dark" : "light");
                });
            })();

            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PARTICLE BACKGROUND (pauses when tab hidden)
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            (() => {
                const canvas = document.getElementById("particles-canvas");
                const ctx = canvas.getContext("2d");
                let particles = [];
                let w,
                    h,
                    animId,
                    running = true;
                const COUNT = 60;

                function resize() {
                    w = canvas.width = innerWidth;
                    h = canvas.height = innerHeight;
                }

                function create() {
                    return {
                        x: Math.random() * w,
                        y: Math.random() * h,
                        vx: (Math.random() - 0.5) * 0.4,
                        vy: (Math.random() - 0.5) * 0.4,
                        r: Math.random() * 2 + 1,
                        alpha: Math.random() * 0.3 + 0.1,
                    };
                }

                function init() {
                    resize();
                    particles = [];
                    for (let i = 0; i < COUNT; i++) particles.push(create());
                }

                function draw() {
                    if (!running) return;
                    ctx.clearRect(0, 0, w, h);
                    const col = "108,99,255";
                    particles.forEach((p, i) => {
                        p.x += p.vx;
                        p.y += p.vy;
                        if (p.x < 0) p.x = w;
                        if (p.x > w) p.x = 0;
                        if (p.y < 0) p.y = h;
                        if (p.y > h) p.y = 0;
                        ctx.beginPath();
                        ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
                        ctx.fillStyle = `rgba(${col},${p.alpha})`;
                        ctx.fill();
                        for (let j = i + 1; j < particles.length; j++) {
                            const q = particles[j];
                            const dx = p.x - q.x,
                                dy = p.y - q.y;
                            const dist = Math.sqrt(dx * dx + dy * dy);
                            if (dist < 150) {
                                ctx.beginPath();
                                ctx.moveTo(p.x, p.y);
                                ctx.lineTo(q.x, q.y);
                                ctx.strokeStyle = `rgba(${col},${0.06 * (1 - dist / 150)})`;
                                ctx.lineWidth = 1;
                                ctx.stroke();
                            }
                        }
                    });
                    animId = requestAnimationFrame(draw);
                }

                document.addEventListener("visibilitychange", () => {
                    if (document.hidden) {
                        running = false;
                        cancelAnimationFrame(animId);
                    } else {
                        running = true;
                        draw();
                    }
                });

                addEventListener("resize", resize);
                init();
                draw();
            })();

            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           2048 GAME ENGINE
           â€” smooth CSS-transition tile animation
           â€” localStorage save/load
           â€” multi-undo stack (10 levels)
           â€” +N merge score popup
           â€” touch-detection D-pad
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            class Game2048 {
                constructor() {
                    this.size = 4;
                    this.score = 0;
                    this.bestScore = parseInt(
                        localStorage.getItem("best2048") || "0",
                    );
                    this.won = false;
                    this.over = false;
                    this.keepPlaying = false;
                    this.undoStack = [];
                    this.maxUndo = 10;
                    this.tileCounter = 0;
                    this.moveLock = false;
                    this.board = this.emptyBoard();
                    this.tileEls = {}; // id â†’ DOM element

                    this.boardEl = document.getElementById("gameBoard");
                    this.tilesEl = document.getElementById("tilesContainer");
                    this.scoreEl = document.getElementById("current-score");
                    this.bestEl = document.getElementById("best-score");
                    this.overOvl = document.getElementById("gameOverOverlay");
                    this.winOvl = document.getElementById("winOverlay");

                    this.bestEl.textContent = this.bestScore;
                    this.setupInput();

                    if (!this.loadState()) this.initNew();
                }

                emptyBoard() {
                    return Array.from({ length: this.size }, () =>
                        Array(this.size).fill(null),
                    );
                }

                /* â”€â”€ New game / Restart â”€â”€ */
                initNew() {
                    this.board = this.emptyBoard();
                    this.score = 0;
                    this.won = false;
                    this.over = false;
                    this.keepPlaying = false;
                    this.undoStack = [];
                    this.tileCounter = 0;
                    this.moveLock = false;
                    this.scoreEl.textContent = "0";
                    this.overOvl.classList.remove("active");
                    this.winOvl.classList.remove("active");
                    this.clearTileEls();
                    this.addRandom();
                    this.addRandom();
                    this.fullRender();
                    this.save();
                }

                restart() {
                    this.initNew();
                }

                continueAfterWin() {
                    this.keepPlaying = true;
                    this.winOvl.classList.remove("active");
                    this.save();
                }

                /* â”€â”€ Grid metrics â”€â”€ */
                metrics() {
                    const cw = this.tilesEl.getBoundingClientRect().width;
                    const gap = cw > 300 ? 8 : 6;
                    const sz = (cw - gap * (this.size - 1)) / this.size;
                    return { gap, sz };
                }

                cellPos(r, c) {
                    const { gap, sz } = this.metrics();
                    return { top: r * (sz + gap), left: c * (sz + gap), sz };
                }

                fontSize(val, sz) {
                    if (val >= 1024) return sz * 0.28;
                    if (val >= 128) return sz * 0.35;
                    return sz * 0.42;
                }

                tileClassName(v) {
                    return v <= 2048 ? `tile-${v}` : "tile-super";
                }

                /* â”€â”€ DOM tile helpers â”€â”€ */
                createTileEl(tile, r, c, anim) {
                    const { top, left, sz } = this.cellPos(r, c);
                    const el = document.createElement("div");
                    el.className = `tile ${this.tileClassName(tile.value)}`;
                    if (anim) el.classList.add(anim);
                    el.style.cssText = `width:${sz}px;height:${sz}px;top:${top}px;left:${left}px;font-size:${this.fontSize(tile.value, sz)}px;line-height:${sz}px;`;
                    el.textContent = tile.value;
                    this.tilesEl.appendChild(el);
                    this.tileEls[tile.id] = el;
                    return el;
                }

                slideTileEl(id, r, c) {
                    const el = this.tileEls[id];
                    if (!el) return;
                    const { top, left } = this.cellPos(r, c);
                    el.style.top = `${top}px`;
                    el.style.left = `${left}px`;
                }

                removeTileEl(id) {
                    const el = this.tileEls[id];
                    if (el) {
                        el.remove();
                        delete this.tileEls[id];
                    }
                }

                clearTileEls() {
                    Object.keys(this.tileEls).forEach((id) =>
                        this.removeTileEl(id),
                    );
                    this.tilesEl.innerHTML = "";
                }

                fullRender() {
                    this.clearTileEls();
                    for (let r = 0; r < this.size; r++)
                        for (let c = 0; c < this.size; c++) {
                            const cell = this.board[r][c];
                            if (cell) this.createTileEl(cell, r, c, null);
                        }
                }

                /* â”€â”€ Random tile â”€â”€ */
                emptyCells() {
                    const cells = [];
                    for (let r = 0; r < this.size; r++)
                        for (let c = 0; c < this.size; c++)
                            if (!this.board[r][c]) cells.push({ r, c });
                    return cells;
                }

                addRandom() {
                    const empty = this.emptyCells();
                    if (!empty.length) return null;
                    const { r, c } =
                        empty[Math.floor(Math.random() * empty.length)];
                    const tile = {
                        value: Math.random() < 0.9 ? 2 : 4,
                        id: ++this.tileCounter,
                    };
                    this.board[r][c] = tile;
                    return { tile, r, c };
                }

                /* â”€â”€ Core move with animation tracking â”€â”€ */
                move(dir) {
                    if (this.over || (this.won && !this.keepPlaying)) return;
                    if (this.moveLock) return;

                    const v = {
                        up: { dr: -1, dc: 0 },
                        down: { dr: 1, dc: 0 },
                        left: { dr: 0, dc: -1 },
                        right: { dr: 0, dc: 1 },
                    }[dir];
                    if (!v) return;

                    // Undo snapshot
                    const snap = {
                        board: this.board.map((r) =>
                            r.map((c) => (c ? { ...c } : null)),
                        ),
                        score: this.score,
                    };

                    const slides = []; // { id, toR, toC }
                    const merges = []; // { id1, id2, newTile, r, c, pts }
                    let moved = false;
                    const mergedSet = new Set();

                    const rows = [...Array(this.size).keys()];
                    const cols = [...Array(this.size).keys()];
                    if (v.dr === 1) rows.reverse();
                    if (v.dc === 1) cols.reverse();

                    for (const r of rows) {
                        for (const c of cols) {
                            const cell = this.board[r][c];
                            if (!cell) continue;

                            let nr = r,
                                nc = c,
                                target = null;
                            while (true) {
                                const tr = nr + v.dr,
                                    tc = nc + v.dc;
                                if (
                                    tr < 0 ||
                                    tr >= this.size ||
                                    tc < 0 ||
                                    tc >= this.size
                                )
                                    break;
                                if (this.board[tr][tc]) {
                                    if (
                                        this.board[tr][tc].value ===
                                            cell.value &&
                                        !mergedSet.has(`${tr},${tc}`)
                                    )
                                        target = { r: tr, c: tc };
                                    break;
                                }
                                nr = tr;
                                nc = tc;
                            }

                            if (target) {
                                const tgt = this.board[target.r][target.c];
                                const nv = cell.value * 2;
                                const nt = {
                                    value: nv,
                                    id: ++this.tileCounter,
                                };
                                slides.push({
                                    id: cell.id,
                                    toR: target.r,
                                    toC: target.c,
                                });
                                merges.push({
                                    id1: cell.id,
                                    id2: tgt.id,
                                    newTile: nt,
                                    r: target.r,
                                    c: target.c,
                                    pts: nv,
                                });
                                this.board[target.r][target.c] = nt;
                                this.board[r][c] = null;
                                this.score += nv;
                                mergedSet.add(`${target.r},${target.c}`);
                                moved = true;
                                if (
                                    nv === 2048 &&
                                    !this.won &&
                                    !this.keepPlaying
                                )
                                    this.won = true;
                            } else if (nr !== r || nc !== c) {
                                slides.push({ id: cell.id, toR: nr, toC: nc });
                                this.board[nr][nc] = cell;
                                this.board[r][c] = null;
                                moved = true;
                            }
                        }
                    }

                    if (!moved) return;

                    this.moveLock = true;
                    this.undoStack.push(snap);
                    if (this.undoStack.length > this.maxUndo)
                        this.undoStack.shift();

                    // Phase 1: slide all tiles to new positions (CSS transition)
                    slides.forEach((s) => this.slideTileEl(s.id, s.toR, s.toC));

                    // Phase 2: after slide completes, handle merges + new tile
                    setTimeout(() => {
                        merges.forEach((m) => {
                            this.removeTileEl(m.id1);
                            this.removeTileEl(m.id2);
                            this.createTileEl(
                                m.newTile,
                                m.r,
                                m.c,
                                "tile-merged",
                            );
                            this.showMergePopup(m.r, m.c, m.pts);
                        });

                        const fresh = this.addRandom();
                        if (fresh)
                            this.createTileEl(
                                fresh.tile,
                                fresh.r,
                                fresh.c,
                                "tile-new",
                            );

                        this.updateScore();
                        this.save();

                        if (this.won && !this.keepPlaying) {
                            this.winOvl.classList.add("active");
                            this.winOvl.querySelector(".game-btn")?.focus();
                        }
                        if (!this.canMove()) {
                            this.over = true;
                            document.getElementById("finalScore").textContent =
                                this.score;
                            this.overOvl.classList.add("active");
                            this.overOvl.querySelector(".game-btn")?.focus();
                        }

                        this.moveLock = false;
                    }, 130);
                }

                /* â”€â”€ Merge score popup â”€â”€ */
                showMergePopup(r, c, pts) {
                    const { top, left, sz } = this.cellPos(r, c);
                    const el = document.createElement("div");
                    el.className = "merge-popup";
                    el.textContent = `+${pts}`;
                    el.style.cssText = `top:${top}px;left:${left}px;width:${sz}px;`;
                    this.tilesEl.appendChild(el);
                    el.addEventListener("animationend", () => el.remove());
                }

                /* â”€â”€ Undo (multi-level) â”€â”€ */
                undo() {
                    if (!this.undoStack.length) return;
                    const s = this.undoStack.pop();
                    this.board = s.board;
                    this.score = s.score;
                    this.won = false;
                    this.over = false;
                    this.overOvl.classList.remove("active");
                    this.winOvl.classList.remove("active");
                    this.updateScore();
                    this.fullRender();
                    this.save();
                }

                /* â”€â”€ Move availability â”€â”€ */
                canMove() {
                    if (this.emptyCells().length > 0) return true;
                    for (let r = 0; r < this.size; r++)
                        for (let c = 0; c < this.size; c++) {
                            const v = this.board[r][c]?.value;
                            if (!v) continue;
                            if (
                                r < this.size - 1 &&
                                this.board[r + 1][c]?.value === v
                            )
                                return true;
                            if (
                                c < this.size - 1 &&
                                this.board[r][c + 1]?.value === v
                            )
                                return true;
                        }
                    return false;
                }

                /* â”€â”€ Score â”€â”€ */
                updateScore() {
                    this.scoreEl.textContent = this.score;
                    if (this.score > this.bestScore) {
                        this.bestScore = this.score;
                        this.bestEl.textContent = this.bestScore;
                        localStorage.setItem("best2048", this.bestScore);
                    }
                }

                /* â”€â”€ Persistence â”€â”€ */
                save() {
                    const data = {
                        board: this.board.map((r) =>
                            r.map((c) =>
                                c ? { value: c.value, id: c.id } : null,
                            ),
                        ),
                        score: this.score,
                        won: this.won,
                        over: this.over,
                        keepPlaying: this.keepPlaying,
                        tc: this.tileCounter,
                    };
                    localStorage.setItem("game2048State", JSON.stringify(data));
                }

                loadState() {
                    try {
                        const d = JSON.parse(
                            localStorage.getItem("game2048State"),
                        );
                        if (!d?.board) return false;
                        this.board = d.board.map((r) =>
                            r.map((c) =>
                                c ? { value: c.value, id: c.id } : null,
                            ),
                        );
                        this.score = d.score || 0;
                        this.won = d.won || false;
                        this.over = d.over || false;
                        this.keepPlaying = d.keepPlaying || false;
                        this.tileCounter = d.tc || 0;
                        this.undoStack = [];
                        this.moveLock = false;
                        this.scoreEl.textContent = this.score;
                        this.overOvl.classList.toggle("active", this.over);
                        this.winOvl.classList.toggle(
                            "active",
                            this.won && !this.keepPlaying,
                        );
                        this.fullRender();
                        return true;
                    } catch {
                        return false;
                    }
                }

                /* â”€â”€ Input â”€â”€ */
                setupInput() {
                    // Keyboard
                    document.addEventListener("keydown", (e) => {
                        const map = {
                            ArrowUp: "up",
                            ArrowDown: "down",
                            ArrowLeft: "left",
                            ArrowRight: "right",
                            w: "up",
                            W: "up",
                            s: "down",
                            S: "down",
                            a: "left",
                            A: "left",
                            d: "right",
                            D: "right",
                        };
                        const d = map[e.key];
                        if (d) {
                            e.preventDefault();
                            this.move(d);
                        }
                    });

                    // Board swipe (touch)
                    const board = this.boardEl;
                    let tx = null,
                        ty = null,
                        touching = false;

                    board.addEventListener(
                        "touchstart",
                        (e) => {
                            if (e.touches.length !== 1) return;
                            tx = e.touches[0].clientX;
                            ty = e.touches[0].clientY;
                            touching = true;
                        },
                        { passive: false },
                    );

                    board.addEventListener(
                        "touchmove",
                        (e) => {
                            if (touching) e.preventDefault();
                        },
                        { passive: false },
                    );

                    board.addEventListener(
                        "touchend",
                        (e) => {
                            if (!touching || tx === null) return;
                            touching = false;
                            const dx = e.changedTouches[0].clientX - tx;
                            const dy = e.changedTouches[0].clientY - ty;
                            tx = ty = null;
                            if (Math.max(Math.abs(dx), Math.abs(dy)) < 20)
                                return;
                            this.move(
                                Math.abs(dx) > Math.abs(dy)
                                    ? dx > 0
                                        ? "right"
                                        : "left"
                                    : dy > 0
                                      ? "down"
                                      : "up",
                            );
                        },
                        { passive: false },
                    );

                    board.addEventListener(
                        "touchcancel",
                        () => {
                            touching = false;
                            tx = ty = null;
                        },
                        { passive: true },
                    );

                    // Mouse drag
                    let md = false,
                        mx,
                        my;
                    board.addEventListener("mousedown", (e) => {
                        md = true;
                        mx = e.clientX;
                        my = e.clientY;
                        e.preventDefault();
                    });
                    addEventListener("mouseup", (e) => {
                        if (!md) return;
                        md = false;
                        const dx = e.clientX - mx,
                            dy = e.clientY - my;
                        if (Math.max(Math.abs(dx), Math.abs(dy)) < 20) return;
                        this.move(
                            Math.abs(dx) > Math.abs(dy)
                                ? dx > 0
                                    ? "right"
                                    : "left"
                                : dy > 0
                                  ? "down"
                                  : "up",
                        );
                    });

                    // D-Pad: show on touch devices, prevent double-fire
                    if (
                        "ontouchstart" in window ||
                        navigator.maxTouchPoints > 0
                    ) {
                        document
                            .getElementById("mobileControls")
                            ?.classList.add("visible");
                    }
                    document
                        .querySelectorAll(".dpad-btn[data-dir]")
                        .forEach((btn) => {
                            let handled = false;
                            btn.addEventListener(
                                "touchstart",
                                (e) => {
                                    e.preventDefault();
                                    if (!handled) {
                                        handled = true;
                                        this.move(btn.dataset.dir);
                                        setTimeout(
                                            () => (handled = false),
                                            200,
                                        );
                                    }
                                },
                                { passive: false },
                            );
                            btn.addEventListener("click", () => {
                                if (!handled) this.move(btn.dataset.dir);
                            });
                        });

                    // Resize re-render
                    let rt;
                    addEventListener("resize", () => {
                        clearTimeout(rt);
                        rt = setTimeout(() => this.fullRender(), 80);
                    });
                }
            }

            const game = new Game2048();

            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           COUNTDOWN (fixed target date: 1 September 2026)
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            (() => {
                const target = new Date("2026-09-01T00:00:00");
                const titleEl = document.getElementById("countdown-title");
                const subEl = document.getElementById("countdown-subtitle");

                function tick() {
                    const diff = target - new Date();

                    if (diff <= 0) {
                        titleEl.textContent = "ğŸš€ Premiera!";
                        subEl.textContent = "Strona jest juÅ¼ (prawie) gotowa!";
                        document.getElementById("countdown-days").textContent =
                            "ğŸ‰";
                        document.getElementById("countdown-hours").textContent =
                            "00";
                        document.getElementById(
                            "countdown-minutes",
                        ).textContent = "00";
                        document.getElementById(
                            "countdown-seconds",
                        ).textContent = "00";
                        return;
                    }

                    const d = Math.floor(diff / 864e5);
                    const h = Math.floor((diff % 864e5) / 36e5);
                    const m = Math.floor((diff % 36e5) / 6e4);
                    const s = Math.floor((diff % 6e4) / 1000);

                    document.getElementById("countdown-days").textContent =
                        String(d).padStart(2, "0");
                    document.getElementById("countdown-hours").textContent =
                        String(h).padStart(2, "0");
                    document.getElementById("countdown-minutes").textContent =
                        String(m).padStart(2, "0");
                    document.getElementById("countdown-seconds").textContent =
                        String(s).padStart(2, "0");
                }
                tick();
                setInterval(tick, 1000);
            })();

            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TYPING ANIMATION
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            (() => {
                const texts = [
                    'git commit -m "building something awesome"',
                    "npm run build:portfolio",
                    'echo "Strona w budowie..."',
                    "while (true) { code(); coffee(); }",
                    'console.log("WkrÃ³tce tutaj bÄ™dzie coÅ› cool!");',
                    "sudo make me_a_website",
                ];
                const el = document.getElementById("typingText");
                let ti = 0,
                    ci = 0,
                    del = false;

                function step() {
                    const txt = texts[ti];
                    if (!del) {
                        el.textContent = txt.slice(0, ci + 1);
                        ci++;
                        if (ci >= txt.length) {
                            del = true;
                            setTimeout(step, 2000);
                            return;
                        }
                        setTimeout(step, 50 + Math.random() * 40);
                    } else {
                        el.textContent = txt.slice(0, ci - 1);
                        ci--;
                        if (ci <= 0) {
                            del = false;
                            ti = (ti + 1) % texts.length;
                            setTimeout(step, 500);
                            return;
                        }
                        setTimeout(step, 25);
                    }
                }
                setTimeout(step, 1000);
            })();

            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SMOOTH SCROLL
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            document.querySelectorAll('a[href^="#"]').forEach((a) => {
                a.addEventListener("click", function (e) {
                    e.preventDefault();
                    const t = document.querySelector(this.getAttribute("href"));
                    if (t)
                        t.scrollIntoView({
                            behavior: "smooth",
                            block: "start",
                        });
                });
            });
        </script>
    </body>
</html>
